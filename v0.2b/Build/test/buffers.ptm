TITLE "PTM - Testing Tilebuffers"
WINDOW 360, 200, 4, 1

CHR 1, "1111111110000001101001011000000110100101100110011000000111111111"

PAL 2, &hff0000
PAL 3, &h00ff00
PAL 4, &h0000ff
PAL 5, &h00ffff
PAL 6, &hff00ff
PAL 7, &hffff00

BUF.NEW "buf_1", 1, 20, 20
BUF.VIEW "buf_1", 10, 10, 100, 100
BUF.BCOL "buf_1", 4
BUF.SHOW "buf_1"

BUF.NEW "buf_2", 1, 20, 20
BUF.VIEW "buf_2", 110, 10, 210, 100
BUF.BCOL "buf_2", 5
BUF.SHOW "buf_2"

BUF.SEL "buf_1"
CALL draw_stuff
BUF.SEL "buf_2"
CALL draw_stuff

SND.LOAD "intro", "test/intro.wav"
SND.PLAY "intro"

loop:
	IF.KEY "RIGHT"
		BUF.SCRL "buf_1", 1, 0
	ENDIF
	IF.KEY "LEFT"
		BUF.SCRL "buf_1", -1, 0
	ENDIF
	IF.KEY "UP"
		BUF.SCRL "buf_1", 0, -1
	ENDIF
	IF.KEY "DOWN"
		BUF.SCRL "buf_1", 0, 1
	ENDIF
	IF.KEY "M"
		SND.STOP
	ENDIF
	UPDATE
	GOTO loop

draw_stuff:
	LOCATE 0, 0
	TILE.NEW 'a', 2, 3
	TILE.ADD 'b', 3, 2
	PUT
	LOCATE 1, 0
	TILE.NEW 1, 3, 2
	PUT
	LOCATE 0, 1
	TILE.NEW 1, 3, 2
	PUT
	LOCATE 11, 11
	TILE.NEW 1, 2, 3
	PUT
	LOCATE 2, 5
	COLOR 6, 7
	PRINT "Hello World!"
	LOCATE 2, 6
	FCOL 0
	PRINT "Hello World!"
	LOCATE 2, 7
	BCOL 2
	PRINT "Hello World!"
	RET
